{
  "enabled": true,
  "name": "架构合规检查",
  "description": "当 src/ 目录下的 Python 文件被编辑时，自动检查是否违反宪法级原则",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "src/**/*.py"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "检查刚编辑的文件是否违反以下宪法级原则：\n1. 策略无下单权 - 策略类是否直接调用交易所API或下单方法\n2. 风控硬否决权 - 是否存在绕过风控的代码路径\n3. 状态机唯一入口 - 交易是否绑过状态机直接执行\n4. 参数分层 - L2/L3参数是否被硬编码\n\n如发现违规，指出具体位置和修复建议。"
  }
}