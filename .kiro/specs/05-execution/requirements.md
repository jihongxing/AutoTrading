# Core/Execution 执行层 — 需求文档

## 模块定位
系统最后一层防线，负责精确、可控、可审计地执行订单。

## 宪法级原则
1. 执行层只执行，不判断
2. 执行层不能绕过风控
3. 执行层不能绕过状态机
4. 所有执行必须可审计、可回滚

## 功能需求

### FR-1: 订单执行
- FR-1.1: 市价单执行
- FR-1.2: 限价单执行
- FR-1.3: 批量拆单执行
- FR-1.4: 执行结果确认

### FR-2: 仓位管理
- FR-2.1: 开仓（多/空）
- FR-2.2: 平仓（全部/部分）
- FR-2.3: 加仓/减仓
- FR-2.4: 仓位限制检查

### FR-3: 止盈止损
- FR-3.1: 动态止损设置
- FR-3.2: 动态止盈设置
- FR-3.3: 止损触发执行
- FR-3.4: 止盈触发执行

### FR-4: 撤单与回滚
- FR-4.1: 撤销未完成订单
- FR-4.2: 仓位回滚
- FR-4.3: 风控触发时自动撤单

### FR-5: 执行安全
- FR-5.1: 幂等性保证
- FR-5.2: 并发安全（锁机制）
- FR-5.3: 重试策略
- FR-5.4: 超时处理

### FR-6: 执行日志
- FR-6.1: 订单日志
- FR-6.2: 执行结果日志
- FR-6.3: 异常日志
- FR-6.4: 审计追踪

### FR-7: 交易所接口
- FR-7.1: Binance API 集成
- FR-7.2: 备用交易所切换
- FR-7.3: API 限流处理

## 非功能需求

### NFR-1: 响应时间
- 订单提交延迟 < 100ms
- 订单确认延迟 < 1s

### NFR-2: 可靠性
- 订单执行成功率 > 99%
- 支持故障自动恢复

### NFR-3: 可审计
- 所有订单可追溯
- 所有执行可回放

## 约束条件
- 执行层不判断行情
- 执行层不判断策略
- 执行层不修改订单参数
