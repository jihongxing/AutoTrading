# BTC 自动交易系统

## 策略合约 PRD（内核级）

---

## 0. 文档定位（必读）

本 PRD 定义 **Strategy Contract（策略合约）** 的内核级规范，用于约束所有策略在系统中的**发言权、权限边界与责任**。

> 策略合约不是策略说明书，而是**策略与系统之间的法律文本**。

该合约一旦生效：

- 策略不能越权
    
- 学习模块不能修改合约
    
- 执行层只接受“合规后的结果”
    

---

## 1. 设计目标与原则

### 1.1 设计目标

- 防止策略直接驱动交易
    
- 防止多策略冲突导致系统失控
    
- 保证策略可插拔、可禁用、可审计
    

### 1.2 基本原则（不可违反）

1. **策略只陈述事实，不下命令**
    
2. **策略输出必须是结构化声明（Claim）**
    
3. **策略无权访问执行层**
    
4. **策略可被随时沉默（Mute）**
    

---

## 2. 策略在系统中的法律身份

### 2.1 策略不是决策者

策略的唯一职责：

> **声明当前市场是否处于“该策略可发挥作用的已知范式”**

策略**不能**：

- 决定是否交易
    
- 决定仓位大小
    
- 决定下单方向
    

---

## 3. 策略输出的唯一合法形式

### 3.1 Strategy Claim（策略声明）

所有策略必须输出以下结构：

- strategy_id
    
- claim_type
    
- confidence（0~1，仅用于裁决参考）
    
- validity_window（时间粒度）
    
- constraints（策略自我约束）
    

### 3.2 合法的 Claim 类型（白名单）

- MARKET_ELIGIBLE
    
- MARKET_NOT_ELIGIBLE
    
- REGIME_MATCHED
    
- REGIME_CONFLICT
    
- EXECUTION_VETO
    

📌 **禁止自定义 Claim 类型**

---

## 4. 策略发言权等级（代替“权重”）

策略不使用数值权重，而使用**发言权等级**：

- DISABLED：禁止发言
    
- ELIGIBLE：允许参与裁决
    
- DOMINANT：当前主导范式策略
    
- VETO_ONLY：仅允许否决执行
    

📌 发言权等级由**策略裁决层**赋予，策略自身无权声明。

---

## 5. 策略分类与优先级（强制）

### 5.1 一级策略（资格类）

- 波动率释放 + 时间衰减
    
- 结构性区间破坏
    

**权限**：

- 可声明 MARKET_ELIGIBLE
    
- 可成为 DOMINANT
    

---

### 5.2 二级策略（增强/过滤类）

- 时间结构优势
    
- 波动率不对称
    

**权限**：

- 不可单独触发交易
    
- 仅可支持或削弱一级策略
    

---

### 5.3 三级策略（否决类）

- 流动性收割窗口
    
- 微结构异常
    

**权限**：

- 可输出 EXECUTION_VETO
    
- 不可推动交易
    

---

## 6. 策略冲突处理规则（硬规则）

### 6.1 排他性声明

若出现以下情况：

- 两个一级策略同时声明 MARKET_ELIGIBLE
    
- 且其范式互斥
    

👉 系统判定为 **REGIME_UNCLEAR**，本轮不交易。

---

## 7. 策略健康度（Health）机制

### 7.1 健康度定义

每个策略维护以下只读指标：

- 最近 N 次激活后表现
    
- 连续失败次数
    
- 是否触发过风控警告
    

### 7.2 健康度用途

- 决定策略是否被 **Mute**
    
- 决定是否允许其成为 DOMINANT
    

📌 健康度**不用于**：

- 调整信号强度
    
- 动态学习权重
    

---

## 8. 策略沉默（Mute）与封禁（Ban）

### 8.1 Mute（临时沉默）

触发条件：

- 连续失败
    
- 频繁冲突
    
- 风控警告
    

效果：

- 策略输出被忽略
    
- 不影响系统其他策略
    

---

### 8.2 Ban（长期封禁）

触发条件：

- 多次导致 RISK_LOCKED
    
- 明确逻辑错误
    

效果：

- 策略完全卸载
    

---

## 9. 策略与学习模块的边界

- 学习模块 **不能修改策略合约**
    
- 学习模块 **不能改变策略分类**
    
- 学习结果仅能：
    
    - 建议策略参数调整
        
    - 提供统计报告
        

📌 是否采纳，必须经过人工或系统审核

---

## 10. 非目标（明确不做）

- ❌ 不允许策略自我组合
    
- ❌ 不允许策略直接下单
    
- ❌ 不允许策略学习发言权
    

---

## 11. 一句话总结（宪法级）

> **策略不是大脑，  
> 而是证人。  
> 系统不是民主，  
> 而是法治。**

---

## 12. 合约生效声明

本策略合约一旦加载：

- 对所有策略模块生效
    
- 对所有未来策略生效
    
- 不可被单一模块绕过
    

> **除非修改内核，否则策略永远服从合约。**