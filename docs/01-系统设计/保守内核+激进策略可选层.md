# BTC 自动交易系统 — 保守内核 + 激进策略可选层（文字版 PRD）

## 1️⃣ 文档目标

- 在保证核心资金安全的前提下，提供激进策略扩展路径
    
- 描述两层策略的信号流、状态机裁决、风控协作和执行落地
    
- 指导团队逐步放大资金规模，实现小资金到大资金的稳健增长
    

---

## 2️⃣ 系统概览

```text
[数据层 / 统一化数据管理]
  └─ 行情、成交、微结构、新闻、宏观指标
  └─ 历史特征、信号与交易日志
        │
        ▼
+-------------------------+
|   策略层（双层）       |
|-------------------------|
| 1. 保守内核策略        |
|   └─ 核心证人（波动率释放+时间衰减、区间破坏） |
|   └─ 辅助证人（时间结构优势、波动率不对称、流动性收割窗口、微结构异常） |
|   └─ 高交易窗口判定、信号评分 |
|-------------------------|
| 2. 激进可选策略层      |
|   └─ 高频套利策略、小资金短线捕捉策略 |
|   └─ 市场情绪、新闻事件、微结构放大机会 |
|   └─ 可在风控允许条件下触发，仓位可放大 |
+-------------------------+
        │
        ▼
[全局状态机 / 宪法级状态机]
  └─ 信号裁决（双层策略信号统一裁定）
  └─ 状态转换：RISK_LOCKED → 恢复 → 再交易
        │
        ▼
[内核级风控]
  └─ 风控证人（仓位限制、最大回撤、冻结信号）
  └─ 宏观证人（政策、稳定币流动性、重大新闻事件）
  └─ 对激进策略有独立否决权
        │
        ▼
[执行层]
  └─ 多单/空单开平仓
  └─ 仓位管理（保守策略全额，激进策略可限制）
  └─ 动态止盈止损、滑点容忍、异常处理
        │
        ▼
[自学习自优化]
  └─ 评估证人和策略组合表现
  └─ 调整权重、增删证人、优化窗口阈值
  └─ 优化激进策略触发条件和风险容忍度
  └─ 输出优化参数到策略层 → 形成闭环

```


---

## 3️⃣ 两层策略设计原则

|层级|特点|信号来源|仓位/风控|风险控制|
|---|---|---|---|---|
|**保守内核**|低频、稳健、正向盈利|核心+辅助证人|全额仓位（按保守配置）|全局风控严格，保证资金安全|
|**激进可选**|高频、机会导向、放大收益|高频套利、市场情绪、新闻事件、微结构|小资金起步，可随规模放大|风控证人可独立冻结或否决交易，仓位动态限制|

---

## 4️⃣ 风控与状态机协作

- **保守内核**：风控硬否决 → 信号冻结 → 状态机进入 RISK_LOCKED
    
- **激进策略**：风控可选择性否决 → 信号被限制或减权
    
- **状态机**统一裁决两层策略信号 → 输出执行层
    
- **执行层**严格遵守风控仓位限制 → 动态止盈止损
    

> 核心思想：**先稳后放、机会出现才激进、风险可控**

---

## 5️⃣ 自学习优化在双层策略中的作用

1. **评估保守证人**
    
    - 保证稳健盈利和低爆仓率
        
    - 优化高交易窗口和仓位控制
        
2. **评估激进策略**
    
    - 动态计算收益/风险比
        
    - 优化触发条件、仓位比例、止盈止损参数
        
    - 调整激进策略与保守内核之间的权重和触发频率
        
3. **闭环优化**
    
    - 系统自动记录信号成功率、仓位表现、冻结次数
        
    - 自学习模块输出优化参数给策略层 → 双层策略不断迭代
        

---

## 6️⃣ 模块级 PRD 索引（双层策略适用）

|模块|PRD 名称|核心功能|
|---|---|---|
|数据层|《BTC 自动交易系统 — 数据层统一化 PRD》|提供实时+历史数据，支持双层策略计算|
|全局状态机|《BTC 自动交易系统 — 全局状态机 PRD》|双层策略信号裁决，状态转换管理|
|策略编排|《BTC 自动交易系统 — 策略编排与中间抽象层 PRD》|核心+辅助证人，激进策略触发条件，高交易窗口评分|
|内核级风控|《BTC 自动交易系统 — 内核级风控 PRD》|保守内核和激进策略的仓位限制和冻结/否决规则|
|执行层|《BTC 自动交易系统 — 执行层 PRD》|多单/空单执行、动态止盈止损、异常处理|
|自学习优化|《BTC 自动交易系统 — 自学习自优化 PRD》|双层策略表现评估、权重调整、激进策略优化|
|策略合约|《策略合约 PRD（内核级）》|双层策略信号优先级管理|
|执行合约|《执行合约 PRD（内核级）》|执行规则、接口和容错设计|

---

## 7️⃣ 系统设计总结

- **保守内核**保证资金安全、低频稳健盈利
    
- **激进策略层**利用机会窗口，低仓位试水 → 随资金增长可放大收益
    
- **风控独立否决**：对任何策略均可冻结或减权
    
- **状态机闭环**：统一裁决、RISK_LOCKED 生命周期管理
    
- **自学习闭环**：不断优化证人、策略组合和高交易窗口，提高稳健性和收益机会
    

> 核心思想：**小资金激进试水 → 机会识别 → 风控保护 → 保守内核稳住 → 自学习优化 → 放大资金规模**



## 8、保守内核 + 激进策略可选层（文字版架构图）

```text
┌───────────────────────────────┐
│          数据层统一化           │
│ ───────────────────────────── │
│ 行情/成交/订单簿/微结构        │
│ 宏观/新闻/政策/事件            │
│ 历史特征/交易日志/信号          │
└─────────────┬─────────────────┘
              │
              ▼
┌───────────────────────────────┐
│          策略层（双层）         │
│ ───────────────────────────── │
│ 1. 保守内核策略                 │
│   ├─ 核心证人：波动率释放+时间衰减、区间破坏 │
│   ├─ 辅助证人：时间结构优势、波动率不对称、流动性收割窗口、微结构异常 │
│   └─ 高交易窗口判定、信号评分 │
│                                 │
│ 2. 激进可选策略层               │
│   ├─ 高频套利、短线捕捉策略     │
│   ├─ 市场情绪、新闻事件机会     │
│   └─ 风控允许下触发，仓位可放大 │
└─────────────┬─────────────────┘
              │
              ▼
┌───────────────────────────────┐
│       全局状态机 / 宪法级状态   │
│ ───────────────────────────── │
│ 信号裁决（保守+激进策略信号）   │
│ 状态转换：RISK_LOCKED → 恢复 → 再交易 │
└─────────────┬─────────────────┘
              │
              ▼
┌───────────────────────────────┐
│         内核级风控层            │
│ ───────────────────────────── │
│ 风控证人：仓位限制、最大回撤、冻结信号 │
│ 宏观证人：政策/新闻/稳定币流动性    │
│ 对激进策略可独立否决或冻结        │
└─────────────┬─────────────────┘
              │
              ▼
┌───────────────────────────────┐
│          执行层                 │
│ ───────────────────────────── │
│ 多单/空单开平仓                 │
│ 仓位管理（保守全额，激进限制）   │
│ 动态止盈止损、滑点容忍、异常处理 │
└─────────────┬─────────────────┘
              │
              ▼
┌───────────────────────────────┐
│       自学习自优化层            │
│ ───────────────────────────── │
│ 评估证人和策略组合表现           │
│ 调整权重、增删证人、优化窗口阈值 │
│ 优化激进策略触发条件和仓位       │
│ 输出优化参数到策略层 → 形成闭环   │
└───────────────────────────────┘

```
