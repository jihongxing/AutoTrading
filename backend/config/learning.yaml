# BTC 自动交易系统 — 自学习配置
# 层级: L1 (系统配置)

# 学习频率
schedule:
  daily_learning_hour: 4  # UTC 4:00 执行每日学习
  weekly_learning_day: 0  # 周一执行每周学习
  weekly_learning_hour: 5  # UTC 5:00

# 样本量要求
sample_requirements:
  min_trades_daily: 10
  min_trades_weekly: 50
  min_trades_for_weight_adjust: 30
  min_trades_for_position_adjust: 50

# 边界约束
bounds:
  witness_weight:
    min: 0.1
    max: 0.9
  position_multiplier:
    min: 0.5
    max: 1.5
  default_position_ratio:
    min: 0.01
    max: 0.03
  stop_loss_adjustment:
    min: -0.005
    max: 0.005
  take_profit_adjustment:
    min: -0.005
    max: 0.005

# 调整限制
adjustment_limits:
  max_daily_weight_change: 0.05
  max_weekly_position_change: 0.1
  max_stop_adjustment: 0.005

# 审批规则
approval_rules:
  # 需要审批的调整
  require_approval:
    - weight_change_gt: 0.1  # 权重变化 > 10%
    - position_change_gt: 0.2  # 仓位变化 > 20%
    - consecutive_same_direction: 3  # 连续同向调整 3 次

# 禁止触碰的参数
forbidden_params:
  - max_drawdown
  - daily_max_loss
  - weekly_max_loss
  - max_leverage
  - max_single_position
  - max_total_position

# 数据过滤
data_filter:
  # 只使用这些状态下的数据
  valid_states:
    - NORMAL
    - WARNING
  # 排除这些状态的数据
  excluded_states:
    - COOLDOWN
    - RISK_LOCKED
    - HALTED

# 存储配置
storage:
  max_history_versions: 100
  auto_backup: true
  backup_interval_hours: 24
