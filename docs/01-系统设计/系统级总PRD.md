# BTC 自动交易系统 — 系统总 PRD（文字版一体化概览）

## 1️⃣ 文档目标

- 提供系统全局架构、数据流、闭环逻辑和模块关系一览
    
- 指导开发、运维和自学习优化
    
- 索引所有模块级 PRD，便于团队快速定位和参考
    

---

## 2️⃣ 系统目标

- 自动化交易比特币，追求稳健、低频、正向盈利
    
- 支持多策略、多证人、多层级风控和自学习优化
    
- 可扩展、可迭代，保障资金安全和系统稳定
    

---

## 3️⃣ 系统架构文字版

```text
[数据层 / 统一化数据管理]
  └─ 行情、成交、订单簿、微结构
  └─ 宏观、新闻、政策、事件
  └─ 历史特征、信号和交易日志
        │
        ▼
[策略层 / 策略编排与中间抽象层]
  └─ 核心证人（1.波动率释放+时间衰减 2.区间破坏）
  └─ 辅助证人（3.时间结构优势 4.波动率不对称 5.流动性收割窗口 6.微结构异常）
  └─ 高交易窗口判定、信号强度评分
  └─ 输出：交易信号 + 权重 + 仓位建议
        │
        ▼
[全局状态机 / 宪法级状态机]
  └─ 信号裁决、策略投票
  └─ 状态转换：RISK_LOCKED → 恢复 → 再交易
        │
        ▼
[内核级风控]
  └─ 风控证人、宏观证人
  └─ 仓位限制、最大回撤、冻结/否决交易信号
        │
        ▼
[执行层]
  └─ 多单/空单开平仓
  └─ 仓位管理、动态止盈止损
  └─ 异常处理、回滚、日志记录
        │
        ▼
[自学习自优化层]
  └─ 评估证人和策略组合表现
  └─ 调整权重、增删证人、优化窗口阈值
  └─ 输出优化参数到策略层 → 形成闭环

```


---

## 4️⃣ 模块级 PRD 索引

|模块|PRD 名称|核心功能|
|---|---|---|
|数据层|《BTC 自动交易系统 — 数据层统一化 PRD》|统一采集、清洗、特征化、存储和分发数据|
|全局状态机|《BTC 自动交易系统 — 全局状态机 PRD》|信号裁决、状态转换、RISK_LOCKED 生命周期管理|
|策略编排|《BTC 自动交易系统 — 策略编排与中间抽象层 PRD》|证人定义、策略组合、权重管理、高交易窗口判定|
|内核级风控|《BTC 自动交易系统 — 内核级风控 PRD》|风控/宏观证人、仓位限制、冻结/否决交易|
|执行层|《BTC 自动交易系统 — 执行层 PRD》|多单/空单下单、平仓、仓位管理、止盈止损|
|自学习优化|《BTC 自动交易系统 — 自学习自优化 PRD》|评估证人表现、调整权重、增删证人、优化窗口与参数|
|策略合约|《策略合约 PRD（内核级）》|多策略信号组合逻辑与优先级管理|
|执行合约|《执行合约 PRD（内核级）》|执行逻辑规则与接口定义|

---

## 5️⃣ 系统优化与架构建议

1. **数据层统一化**
    
    - 集中处理行情、成交、微结构、新闻、宏观指标
        
    - 支持历史特征化存储、回测、自学习训练
        
    - 高速缓存 + 订阅机制 + 版本管理
        
2. **策略模块接口化**
    
    - 输入：市场数据 + 仓位状态
        
    - 输出：信号 + 权重 + 高交易窗口评分
        
    - 支持热插拔和新增策略证人
        
3. **风控分层**
    
    - 实时风控（冻结/否决即时交易信号）
        
    - 周期性统计风控（回撤、资金占用）
        
4. **自学习增强**
    
    - 离线学习环境 + 在线渐进迭代
        
    - 动态优化证人权重、仓位策略、止盈止损、高交易窗口阈值
        
5. **异常与容错机制**
    
    - 执行层异常保护（全局冻结、仓位回滚）
        
    - 信号和执行反馈心跳检测
        
6. **监控与可视化**
    
    - 实时信号通过率、执行成功率、风控冻结次数
        
    - 自学习优化效果、窗口判定准确率、策略证人表现可视化
        
7. **模块解耦与扩展性**
    
    - 每个模块暴露清晰接口
        
    - 支持新增证人、策略或交易所接口
        

---

## 6️⃣ 系统闭环总结

- **信号闭环**：策略证人 → 状态机裁决 → 风控审批 → 执行 → 自学习优化 → 策略层
    
- **风险闭环**：风控硬否决 + 高交易窗口放大 → 执行稳健收益
    
- **优化闭环**：自学习评估证人和策略组合 → 动态调整权重 → 改善窗口判定和仓位管理
    

> 系统特点：三权分立、多证人、多策略、风控优先、闭环自学习，可扩展性强，适合大资金低频稳健盈利模式。