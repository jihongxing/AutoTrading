# Strategy 策略层 — 需求文档

## 模块定位
证人体系，负责识别市场结构并输出 Claim，不参与交易决策。

## 宪法级原则
1. 策略无下单权
2. 策略只输出 Claim
3. 策略不能感知账户余额
4. 策略不能计算最终仓位
5. TIER3 证人拥有一票否决权

## 功能需求

### FR-1: 策略基类
- FR-1.1: BaseStrategy 抽象基类
- FR-1.2: generate_claim() 抽象方法
- FR-1.3: 架构约束（禁止下单方法）
- FR-1.4: 证人状态管理（Active/Muted/Banned）

### FR-2: 核心证人（TIER 1）
- FR-2.1: 波动率释放 + 时间衰减证人
- FR-2.2: 区间破坏证人

### FR-3: 辅助证人（TIER 2）
- FR-3.1: 时间结构优势证人
- FR-3.2: 波动率不对称证人
- FR-3.3: 流动性收割窗口证人
- FR-3.4: 微结构异常证人

### FR-4: 否决证人（TIER 3）
- FR-4.1: 风控证人（Risk Sentinel）
- FR-4.2: 宏观/事件证人（Macro Sentinel）

### FR-5: 策略编排
- FR-5.1: 证人注册与管理
- FR-5.2: 证人权重管理
- FR-5.3: Claim 聚合
- FR-5.4: 冲突消解

### FR-6: 高交易窗口判定
- FR-6.1: 窗口判定逻辑
- FR-6.2: 仓位放大系数输出
- FR-6.3: 窗口评分

### FR-7: 证人健康度
- FR-7.1: 健康度计算
- FR-7.2: 健康度等级（A/B/C/D）
- FR-7.3: 自动 Mute/Ban

## 非功能需求

### NFR-1: 响应时间
- 策略计算延迟 < 100ms

### NFR-2: 可扩展性
- 支持热插拔新证人
- 新增证人不影响现有系统

### NFR-3: 可测试性
- 策略可独立回测
- 策略可 Mock 测试

## 约束条件
- 策略不输出 BUY/SELL 指令
- 策略不直接下单
- 策略不感知账户状态
